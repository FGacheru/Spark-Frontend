<!-- Top Section -->
<div class="row justify-content-between mb-2 pl-4">
    <p class="mb-2"> SPARE PART TYPE </p>

    <div>
        <app-default-button  text="Add New" class="mr-4" (action)="openAdd()" ></app-default-button>
    </div>
</div>

<!--Table-->
<app-basic-table [titles]="titles" [url]="url" [data]="data"  ></app-basic-table>


<!-- Add Item Type Modal -->
<jw-modal id="add-spare-part" (tableAction)="reloadTable()" width="30%">

    <p class="mb-2">ADD SPARE PART TYPE</p>
 
    <form [formGroup]="add_spare_type_form" (ngSubmit)="onSubmitAdd()" >
        
        <!--Item Type Name-->
        <div>
            <small>PART CODE</small>
            <input class="mt-2 form-control form-control-sm opt-value" formControlName="part_code" />

            <!-- Errors -->
            <div
                *ngIf="add_spare_type_form.controls['part_code'].invalid && (add_spare_type_form.controls['part_code'].dirty 
                || add_spare_type_form.controls['part_code'].touched)"
                class="alert">
                <div *ngIf="add_spare_type_form.controls['part_code'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.part_code">
                <span class="text-danger opt-value">
                {{api_errors.part_code}}
                </span>
            </div>
        </div>

        <!-- Supplier -->
        <div class="mt-2">
            <small>SUPPLIER NAME</small>

            <select class="mt-2 form-control form-control-sm opt-value" formControlName="supplier" *ngIf="!supplier_loading">
                <option *ngFor="let supplier of suppliers" value="{{supplier.id}}" required>{{supplier.name}}</option>
            </select>

            <!-- Loader -->
            <span class="linear-background" *ngIf="supplier_loading"></span>

            <!-- Errors -->
            <div
                *ngIf="add_spare_type_form.controls['supplier'].invalid && (add_spare_type_form.controls['supplier'].dirty 
                || add_spare_type_form.controls['supplier'].touched)"
                class="alert">
                <div *ngIf="add_spare_type_form.controls['supplier'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.supplier">

                <span class="text-danger opt-value">
                {{api_errors.supplier}}
                </span>
            </div>
        </div>

                <!-- Description-->
                <div class="mt-2">
                    <small>PART DESCRIPTION</small>
        
                    <input class="mt-2 form-control form-control-sm opt-value" formControlName="description" />

            
                    <!-- Errors -->
                    <div
                        *ngIf="add_spare_type_form.controls['description'].invalid && (add_spare_type_form.controls['description'].dirty 
                        || add_spare_type_form.controls['description'].touched)"
                        class="alert">
                        <div *ngIf="add_spare_type_form.controls['description'].errors.required">
                        <span class="text-danger opt-value">
                            Field is required <br>
                        </span>
                        </div>
                    </div>
        
                    <div *ngIf="api_errors.description">
        
                        <span class="text-danger opt-value">
                        {{api_errors.description}}
                        </span>
                    </div>
                </div>



        <!---comment-->
        <div class="mt-4">
            <small>COMMENT</small>

            <textarea  cols="4" rows="8" class="mt-2 form-control form-control-sm opt-value" type="comment" formControlName="comment" >
            </textarea>

            <!-- Errors -->
            <div
                *ngIf="add_spare_type_form.controls['comment'].invalid && (add_spare_type_form.controls['comment'].dirty 
                || add_spare_type_form.controls['comment'].touched)"
                class="alert">
                <div *ngIf="add_spare_type_form.controls['comment'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.comment">
                <span class="text-danger opt-value">
                {{api_errors.comment}}
                </span>
            </div>
        </div>

              <!-- Re Order Level -->
              <div class="mt-2">
                <small>Re ORDER LEVEL</small>
    
                <input class="mt-2 form-control form-control-sm opt-value" type="number" formControlName="re_order_level" />

    
                <!-- Errors -->
                <div
                    *ngIf="add_spare_type_form.controls['re_order_level'].invalid && (add_spare_type_form.controls['re_order_level'].dirty 
                    || add_spare_type_form.controls['re_order_level'].touched)"
                    class="alert">
                    <div *ngIf="add_spare_type_form.controls['re_order_level'].errors.required">
                    <span class="text-danger opt-value">
                        Field is required <br>
                    </span>
                    </div>
                </div>
    
                <div *ngIf="api_errors.re_order_level">
    
                    <span class="text-danger opt-value">
                    {{api_errors.sre_order_level}}
                    </span>
                </div>
            </div>

         <!--Submit Button-->
         <div class="row justify-content-end mt-4 pr-3">
            <app-default-button [outline]="true" text="Cancel" class="mr-4"(action)="cancel()" ></app-default-button>

            <app-default-button text="Submit" ></app-default-button>
            
         </div>

    </form> 

</jw-modal>
