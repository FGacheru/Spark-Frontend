<!-- Top Section -->
<div class="row justify-content-between mb-2 pl-4">
    <p class="mb-2"> SHOP </p>

    <div>
        <app-default-button  text="Add Shop" class="mr-4" (action)="openAdd()" ></app-default-button>

        <app-default-button  text="BULK ACTIONS" class="mr-4" (action)="openAdd()" ></app-default-button>
    </div>
</div>

<!--Table-->
<app-basic-table [titles]="titles" [url]="url" [data]="data" ></app-basic-table>


<!-- Add Item Type Modal -->
<jw-modal id="add-spare-part" width="30%">

    <p class="mb-2">ADD/EDIT SHOP</p>
 
    <form [formGroup]="add_shop_form" (ngSubmit)="onSubmitAdd()" >
        
        <!--Item Type Name-->
        <div>
            <small>SHOP NAME</small>
            <input class="mt-2 form-control form-control-sm opt-value" formControlName="name" />

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['name'].invalid && (add_shop_form.controls['name'].dirty 
                || add_shop_form.controls['name'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['name'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.name">
                <span class="text-danger opt-value">
                {{api_errors.name}}
                </span>
            </div>
        </div>

        <!-- Supplier -->
        <div class="mt-2">
            <small>ZONE</small>

            <select class="mt-2 form-control form-control-sm opt-value" formControlName="zone" *ngIf="!users_loading">
                <option *ngFor="let zone of zones" value="{{zone}}" required>{{zone}}</option>
            </select>

            <!-- Loader -->
            <span class="linear-background" *ngIf="users_loading"></span>

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['zone'].invalid && (add_shop_form.controls['zone'].dirty 
                || add_shop_form.controls['zone'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['zone'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.zone">

                <span class="text-danger opt-value">
                {{api_errors.zone}}
                </span>
            </div>
        </div>

          <!-- Supplier -->
          <div class="mt-2">
            <small>COUNTY</small>

            <select class="mt-2 form-control form-control-sm opt-value" formControlName="county" *ngIf="!users_loading">
                <option *ngFor="let county of counties" value="{{county}}" required>{{county}}</option>
            </select>

            <!-- Loader -->
            <span class="linear-background" *ngIf="users_loading"></span>

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['county'].invalid && (add_shop_form.controls['county'].dirty 
                || add_shop_form.controls['county'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['county'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.county">

                <span class="text-danger opt-value">
                {{api_errors.county}}
                </span>
            </div>
        </div>


          <!-- Supplier -->
          <div class="mt-2">
            <small>TEAM LEADER</small>

            <select class="mt-2 form-control form-control-sm opt-value" formControlName="team_leader" *ngIf="!users_loading">
                <option *ngFor="let user of users" value="{{user.id}}" required>{{user.full_name}}</option>
            </select>

            <!-- Loader -->
            <span class="linear-background" *ngIf="users_loading"></span>

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['team_leader'].invalid && (add_shop_form.controls['team_leader'].dirty 
                || add_shop_form.controls['team_leader'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['team_leader'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.team_leader">

                <span class="text-danger opt-value">
                {{api_errors.team_leader}}
                </span>
            </div>
        </div>

          <!-- Supplier -->
          <div class="mt-2">
            <small>STATUS</small>

            <select class="mt-2 form-control form-control-sm opt-value" formControlName="status" *ngIf="!users_loading">
                <option *ngFor="let state of status" value="{{state}}" required>{{state}}</option>
            </select>

            <!-- Loader -->
            <span class="linear-background" *ngIf="users_loading"></span>

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['status'].invalid && (add_shop_form.controls['status'].dirty 
                || add_shop_form.controls['status'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['status'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.status">

                <span class="text-danger opt-value">
                {{api_errors.status}}
                </span>
            </div>
        </div>


             <!--Open Date-->
             <div class="mt-3">
                <small>OPEN DATE</small>

                <input class="mt-2 form-control form-control-sm opt-value" type="date" formControlName="open_date" />

                <!-- Errors -->
                <div
                    *ngIf="add_shop_form.controls['open_date'].invalid && (add_shop_form.controls['open_date'].dirty 
                    || add_shop_form.controls['open_date'].touched)"
                    class="alert">
                    <div *ngIf="add_shop_form.controls['open_date'].errors.required">
                    <span class="text-danger opt-value">
                        Field is required <br>
                    </span>
                    </div>
                </div>

                <div *ngIf="api_errors.open_date">
                    <span class="text-danger opt-value">
                    {{api_errors.open_date}}
                    </span>
                </div>
            </div>


                 <!--Close date-->
                 <div class="mt-3">
                    <small>CLOSE DATE</small>
    
                    <input class="mt-2 form-control form-control-sm opt-value" type="date" formControlName="close_date" />
    
                    <!-- Errors -->
                    <div
                        *ngIf="add_shop_form.controls['close_date'].invalid && (add_shop_form.controls['close_date'].dirty 
                        || add_shop_form.controls['close_date'].touched)"
                        class="alert">
                        <div *ngIf="add_shop_form.controls['close_date'].errors.required">
                        <span class="text-danger opt-value">
                            Field is required <br>
                        </span>
                        </div>
                    </div>
    
                    <div *ngIf="api_errors.close_date">
                        <span class="text-danger opt-value">
                        {{api_errors.close_date}}
                        </span>
                    </div>
                </div>


        <div>
            <small>CURRENT MONTH CUSTOMERS</small>
            <input class="mt-2 form-control form-control-sm opt-value" formControlName="month_customers" />

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['month_customers'].invalid && (add_shop_form.controls['month_customers'].dirty 
                || add_shop_form.controls['month_customers'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['month_customers'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.month_customers">
                <span class="text-danger opt-value">
                {{api_errors.month_customers}}
                </span>
            </div>
        </div>

        <div>
            <small>TOTAL CUSTOMERS</small>
            <input class="mt-2 form-control form-control-sm opt-value" formControlName="total_customers" />

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['total_customers'].invalid && (add_shop_form.controls['total_customers'].dirty 
                || add_shop_form.controls['total_customers'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['total_customers'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.total_customers">
                <span class="text-danger opt-value">
                {{api_errors.total_customers}}
                </span>
            </div>
        </div>

        <div>
            <small>PHI</small>
            <input class="mt-2 form-control form-control-sm opt-value" formControlName="phi" />

            <!-- Errors -->
            <div
                *ngIf="add_shop_form.controls['phi'].invalid && (add_shop_form.controls['phi'].dirty 
                || add_shop_form.controls['phi'].touched)"
                class="alert">
                <div *ngIf="add_shop_form.controls['phi'].errors.required">
                <span class="text-danger opt-value">
                    Field is required <br>
                </span>
                </div>
            </div>

            <div *ngIf="api_errors.phi">
                <span class="text-danger opt-value">
                {{api_errors.phi}}
                </span>
            </div>
        </div>


         <!--Submit Button-->
         <div class="row justify-content-end mt-4 pr-3">
            <app-default-button [outline]="true" text="Cancel" class="mr-4"(action)="cancel()" ></app-default-button>

            <app-default-button text="Submit" ></app-default-button>
            
         </div>

    </form> 

</jw-modal>
